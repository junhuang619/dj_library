<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>用户主界面</title>
	<link rel="stylesheet" type="text/css" href="../css/login_user.css">
	<script type="text/javascript" src=""></script>
</head>
<body>
	<div class="container">
		<div class="left">
			<a href="borrowbook.html"><h2>借书记录</h2></a>
			<br>
			<a href="hotbook.html">   <h2>热门书籍</h2></a>
			<br>
			<a href="newbook.html">   <h2>最新上架</h2></a>
			<br>
			<a href="login_user.html"><h2>全部书籍</h2></a>
			<br>
            <a href="addbook.html"><h2>新书上架</h2></a>
            <br>
            <a href="alertuser.html"><h2>信息修改</h2></a>
		</div>
		<div class="right">
			<h1>图书借阅系统<sup>djcps</sup></h1>
			<div class="top" style="margin-top:50px;">
				<h2>全部书籍</h2>
                <div>
            <input type="text" class="aa" placeholder="书名"  name="key" id="key" onkeydown="onSearch(this)" value="">
            <label class="bordate_1">上架日期</label>
            <input type="datetime-local" value="2019-02-26T23:59:59"/>
            <select class="select" >
                <option value ="">空闲中</option>
                <option value ="">已借出</option>
            </select>
            <!--<input type="submit" value="查询"  class="select_2">!-->
            <hr/>
        </div>
				<div>

					<table border="1" width="800" id="store">
            <tr bgcolor="#6C6C6C">
                <th width="40">操作</th>
                <th>书名</th>
                <th>封面</th>
                <th id="th1" onclick="SortTable(this)" class="as">价格</th>
                <th id="th2" onclick="SortTable(this)" class="as">可借天数</th>
                <th id="th3" onclick="SortTable(this)" class="as">已借天数</th>
                <th id="th4" onclick="SortTable(this)" class="as">剩余天数</th>
                <th id="th5" onclick="SortTable(this)" class="as">状态</th>
                <th>书籍简介</th>

            </tr>
            <tr >
                <td name="td0"><input type="submit" value="借书" class="button_1" onclick="compute0()"  /></td>
                <td name="td1">Java从入门到跳楼</td>
                <td><img src="../images/3.jpg"></td>
                <td name="td2">24</td>
                <td name="td3">13</td> 
                <td name="td4">12</td>
                <td name="td5">20</td> 
                <td name="td6" width="40"><input type="text" class="result_1" id="result_1" value="空闲中" disabled="disabled"/></td>  
                <td name="td7">这是一本...</td>          
            </tr>
            <tr >
                <td name="td0"><input type="submit" value="借书" class="button_1" onclick="compute1()" /></td>
                <td name="td1">C从跳楼到入土</td>
                 <td></td>
                <td name="td2">22</td>
                <td name="td3">16</td> 
                <td name="td4">13</td>
                <td name="td5">60</td>
                <td name="td6" width="40"><input type="text" class="result_1" id="result_2" value="空闲中" disabled="disabled"/></td>
                <td name="td7">这是一本...</td>

            </tr>
            <tr >
                <td name="td0"><input type="submit" value="借书" class="button_1" onclick="compute2()" /></td>
                <td name="td1">Python从入土到诈尸</td>
                 <td></td>
                <td name="td2">15</td>
                <td name="td3">20</td>  
                <td name="td4">15</td>  
                <td name="td5">16</td>       
                <td name="td6" width="40"><input type="text" class="result_1" id="result_3" value="空闲中" disabled="disabled"/></td>   
                <td name="td7">这是一本...</td> 
            </tr>
            <tr >
                <td name="td0"><input type="submit" value="借书" class="button_1" onclick="compute3()" /></td>
                <td name="td1">H5从诈尸到成灰</td>
                 <td></td>
                <td name="td2">15</td>
                <td name="td3">14</td>  
                <td name="td4">19</td>  
                <td name="td5">15</td>      
                <td name="td6" width="40"><input type="text" class="result_1" id="result_4" value="空闲中" disabled="disabled"/></td> 
                <td name="td7">这是一本...</td>    
            </tr>
        </table>
				</div>
			</div>

		</div>
	</div>
</body>
</html>

<script type="text/javascript"> 
    var tag=1;
    function sortNumberAS(a, b)
    {
        return a - b    
    }
    function sortNumberDesc(a, b)
    {
        return b-a
    }

    function SortTable(obj){
        var td0s=document.getElementsByName("td0");
        var td1s=document.getElementsByName("td1");
        var td2s=document.getElementsByName("td2");
        var td3s=document.getElementsByName("td3");
        var td4s=document.getElementsByName("td4");
        var td5s=document.getElementsByName("td5");
        var tdArray0=[];
        var tdArray1=[];
        var tdArray2=[];
        var tdArray3=[];
        var tdArray4=[];
        var tdArray5=[];
        for(var i=0;i<td0s.length;i++){
            tdArray0.push(td0s[i].innerHTML);
        }
        for(var i=0;i<td1s.length;i++){
            tdArray1.push(parseInt(td1s[i].innerHTML));
        }
        for(var i=0;i<td2s.length;i++){
            tdArray2.push(parseInt(td2s[i].innerHTML));
        }
        for(var i=0;i<td3s.length;i++){
            tdArray3.push(parseInt(td3s[i].innerHTML));
        }
        for(var i=0;i<td4s.length;i++){
            tdArray4.push(parseInt(td4s[i].innerHTML));
        }
        for(var i=0;i<td5s.length;i++){
            tdArray5.push(parseInt(td4s[i].innerHTML));
        }
        var tds=document.getElementsByName("td"+obj.id.substr(2,1));
        var columnArray=[];
        for(var i=0;i<tds.length;i++){
            columnArray.push(parseInt(tds[i].innerHTML));
        }
        var orginArray=[];
        for(var i=0;i<columnArray.length;i++){
            orginArray.push(columnArray[i]);
        }
        if(obj.className=="as"){
            columnArray.sort(sortNumberAS);               //排序后的新值
            obj.className="desc";
        }else{
            columnArray.sort(sortNumberDesc);               //排序后的新值
            obj.className="as";
        }


        for(var i=0;i<columnArray.length;i++){
            for(var j=0;j<orginArray.length;j++){
                if(orginArray[j]==columnArray[i]){
                    document.getElementsByName("td0")[i].innerHTML=tdArray0[j];
                    document.getElementsByName("td1")[i].innerHTML=tdArray1[j];
                    document.getElementsByName("td2")[i].innerHTML=tdArray2[j];
                    document.getElementsByName("td3")[i].innerHTML=tdArray3[j];
                    document.getElementsByName("td4")[i].innerHTML=tdArray4[j];
                    document.getElementsByName("td5")[i].innerHTML=tdArray5[j];
                    orginArray[j]=null;
                    break;
                }
            }
        }
    }
    function compute0(){
        document.getElementById("result_1").value = "已借出";
        alert("已借出");
    }
    function compute1(){
        document.getElementById("result_2").value = "已借出";
        alert("已借出");
    }
    function compute2(){
        document.getElementById("result_3").value = "已借出";
        alert("已借出");
    }
    function compute3(){
        document.getElementById("result_4").value = "已借出";
        alert("已借出");
    }
    function onSearch(obj){
        setTimeout(function(){
        var storeId = document.getElementById('store');
        var rowsLength = storeId.rows.length;
        var key = obj.value;
        var searchCol = 1;
        for(var i=1;i<rowsLength;i++){
            var searchText = storeId.rows[i].cells[searchCol].innerHTML;
            if(searchText.match(key)){
                storeId.rows[i].style.display='';
            }else{
            storeId.rows[i].style.display='none';
            }
        }
    },200);//200为延时时间
} 
</script>